import{_ as i,c as a,o as n,ah as l,b_ as t}from"./chunks/framework.B6i8j-aH.js";const o=JSON.parse('{"title":"OpenCV 응용","description":"","frontmatter":{},"headers":[],"relativePath":"robot-app/qrcode.md","filePath":"robot-app/qrcode.md"}'),h={name:"robot-app/qrcode.md"};function p(k,s,e,r,E,d){return n(),a("div",null,[...s[0]||(s[0]=[l(`<h1 id="opencv-응용" tabindex="-1">OpenCV 응용 <a class="header-anchor" href="#opencv-응용" aria-label="Permalink to “OpenCV 응용”">​</a></h1><h2 id="qr-코드-인식하기" tabindex="-1">QR 코드 인식하기 <a class="header-anchor" href="#qr-코드-인식하기" aria-label="Permalink to “QR 코드 인식하기”">​</a></h2><ul><li>QRCodeDetector 클래스의 사용법을 익힌다.</li><li>QR 코드의 <strong>위치(좌표)</strong>를 찾아 화면에 표시한다.</li><li>QR 코드 안에 담긴 <strong>데이터(문자열, URL)</strong>를 디코딩하여 터미널과 화면에 출력한다.</li></ul><h2 id="cv2-qrcodedetector" tabindex="-1">cv2.QRCodeDetector <a class="header-anchor" href="#cv2-qrcodedetector" aria-label="Permalink to “cv2.QRCodeDetector”">​</a></h2><p>OpenCV는 QR 코드를 처리하기 위해 전용 클래스를 제공합니다.</p><ul><li>기능 1: Detect (검출) - 영상에서 QR 코드가 있는 네 모서리 좌표를 찾습니다.</li><li>기능 2: Decode (해독) - 검출된 QR 코드의 패턴을 분석해 문자열로 바꿉니다.</li></ul><div class="tip custom-block"><p class="custom-block-title">💡 함수 하나로 해결하기</p><p>detectAndDecode(img) 함수를 사용하면 검출과 해독을 동시에 수행할 수 있어 매우 편리합니다.</p></div><h2 id="실습-코드-python" tabindex="-1">실습 코드 (Python) <a class="header-anchor" href="#실습-코드-python" aria-label="Permalink to “실습 코드 (Python)”">​</a></h2><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cv2</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> numpy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> np</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. 카메라 설정</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">cap </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cv2.VideoCapture(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. QR 코드 디텍터 객체 생성 (초기화)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">detector </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cv2.QRCodeDetector()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;QR 코드를 카메라에 보여주세요! (종료: q)&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">while</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ret, frame </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cap.read()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ret:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        break</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 3. QR 코드 검출 및 해독 (핵심 함수)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # data: 해독된 문자열 (예: &quot;http://naver.com&quot;)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # points: QR 코드의 4개 모서리 좌표 (배열)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # straight_qrcode: 정면에서 본 형태로 변환된 QR 코드 이미지 (여기선 안 씀)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    data, points, _ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> detector.detectAndDecode(frame)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 4. QR 코드가 검출되었다면? (points가 None이 아님)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> points </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">is</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # 데이터가 존재한다면 (해독 성공)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # (1) 좌표 데이터를 정수형으로 변환 (그리기 위해)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # points의 형태가 (1, 4, 2) 등으로 나오므로 int로 바꾸고 차원 정리</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            pts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> points.astype(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # (2) QR 코드 주변에 테두리 그리기</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # polylines를 쓰는 이유: QR 코드가 회전되어 있어도 정확히 감싸기 위해</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # isClosed=True: 4개 점을 닫힌 도형으로 연결</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            cv2.polylines(frame, [pts], </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">isClosed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">color</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">thickness</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # (3) 해독된 내용 화면에 출력하기</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # 텍스트 위치: QR 코드의 첫 번째 모서리 위쪽</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            cv2.putText(frame, data, (pts[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">][</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">][</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], pts[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">][</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">][</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                        cv2.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">FONT_HERSHEY_SIMPLEX</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # 터미널에도 출력 (중복 출력 방지를 위해 이전 값과 비교하는 로직 추가 가능)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Detected: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">data</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 5. 화면 출력</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    cv2.imshow(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;QR Code Reader&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, frame)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cv2.waitKey(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> 0x</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">FF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ord</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;q&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        break</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">cap.release()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">cv2.destroyAllWindows()</span></span></code></pre></div><div style="display:flex;justify-content:center;gap:20px;"><img src="`+t+`" alt="QR 코드 인식 결과" style="width:45%;"></div><h3 id="주요-함수-설명" tabindex="-1">주요 함수 설명 <a class="header-anchor" href="#주요-함수-설명" aria-label="Permalink to “주요 함수 설명”">​</a></h3><ol><li><strong>detector.detectAndDecode(frame)</strong> : 가장 중요한 한 줄입니다. 3가지 값을 반환합니다.</li></ol><div class="danger custom-block"><p class="custom-block-title">리턴값</p><ul><li><strong><code>data</code></strong>: QR 코드 안의 내용입니다. (예: &quot;Hello World&quot;). 인식이 실패하거나 QR 코드가 없으면 빈 문자열 &quot;&quot;이 나옵니다.</li><li><strong><code>points</code></strong>: QR 코드의 4개 꼭짓점 좌표입니다. [[x1, y1], [x2, y2], ...] 형태의 배열입니다.</li><li><strong><code>straight_qrcode</code></strong>: 찌그러진 QR 코드를 정면에서 본 정사각형 이미지로 펴서 돌려줍니다. (주로 분석용으로 쓰이며 일반적인 인식에선 잘 안 씁니다.)</li></ul></div><ol start="2"><li><strong>cv2.polylines(...)</strong></li></ol><div class="info custom-block"><p class="custom-block-title">왜 rectangle을 안 쓰나요?</p><p>rectangle은 수평/수직으로 된 사각형만 그릴 수 있습니다. QR 코드는 카메라 앞에서 기울어지거나 회전될 수 있습니다. <strong>polylines</strong>는 4개의 점을 이어주므로, QR 코드가 마름모 꼴로 보여도 정확하게 테두리를 그릴 수 있습니다.</p></div><ol start="3"><li><strong>points.astype(int)</strong> : 좌표 변환</li></ol><p>detectAndDecode가 반환하는 좌표값은 소수점(float) 형태일 수 있습니다. OpenCV의 그리기 함수(polylines, line 등)는 픽셀 좌표로 <strong>정수(int)</strong>만 받기 때문에 타입 변환이 필수입니다.</p><div class="warning custom-block"><p class="custom-block-title">실습 과제</p><ol><li><p><strong>기초</strong>: 특정 QR 코드에만 반응하기 &quot;SECRET&quot;이라는 글자가 들어있는 QR 코드를 인식했을 때만 <strong>&quot;접속 승인(Access Granted)&quot;</strong>이라고 띄우고, 나머지는 <strong>&quot;접속 불가&quot;</strong>라고 빨간색으로 띄워보세요.</p></li><li><p><strong>응용 1</strong>: 웹 브라우저 자동 실행</p></li></ol><ul><li>Python의 webbrowser 모듈을 임포트합니다.</li><li>인식된 데이터가 http로 시작하는 URL이라면 자동으로 인터넷 창을 띄우는 키오스크 기능을 만들어보세요.</li></ul><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> webbrowser</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ... 코드 생략 ...</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data.startswith(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    webbrowser.open(data)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    cv2.waitKey(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 브라우저가 계속 뜨는걸 막기 위해 잠시 멈춤</span></span></code></pre></div><ol start="2"><li><strong>심화</strong>: 바코드도 될까요?</li></ol><ul><li>OpenCV의 QRCodeDetector는 QR 코드 전용입니다. 일반 1차원 바코드(편의점 바코드)는 인식하지 못합니다.</li><li>바코드까지 인식하고 싶다면 pyzbar라는 외부 라이브러리를 설치해야 함을 설명하고, 관심 있는 학생에게 키워드를 던져주세요.</li></ul></div>`,18)])])}const c=i(h,[["render",p]]);export{o as __pageData,c as default};
